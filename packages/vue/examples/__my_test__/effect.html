<script src="../../dist/vue.global.js"></script>

<script>
  const {effect, ref, reactive} = Vue

  const count = ref(0)

  const product = reactive({
    price: 10,
    amount: 0
  })

  let fn = () => {
    console.log("price", product.price)
  }

  // test 1
  // effect(fn)
  // effect(fn)
  // effect(fn)

  // test 2
  // let runner1 = effect(fn)
  // let runner2 = effect(runner1)
  // let runner3 = effect(runner2)


  // test 3
  // effect会立马执行fn,后续price更新,就不走fn了,而是走scheduler
  effect(() => {
    console.log("price", product.price);
  }, {
    // scheduler: () => {
    //   console.log("in scheduler", product.price);
    // }
  })


  // function foo() {
  //   try {
  //     console.log("try");
  //     return 111
  //   } catch (error) {
  //     console.log("error");
  //     return 222
  //   } finally {
  //     console.log("finally");
  //     return 333
  //   }
  // }

  // console.log(foo());
  



</script>